{% extends "base.html" %}
{% block content %}
<div class="container my-5">
    <div class="card shadow-sm border-0">
        <div class="card-body">
            <h2 class="fw-bold">{{ req.title }}</h2>
            <p class="text-muted">Owner: {{ owner.name }}</p>
            <p class="badge 
                {% if req.status == 'Pending' %} bg-warning text-dark
                {% elif req.status == 'Accepted' %} bg-info
                {% elif req.status == 'Completed' %} bg-success
                {% else %} bg-secondary {% endif %}">
                {{ req.status }}
            </p>
            <hr>
            <p>{{ req.description }}</p>
            <p class="text-muted">Category: {{ req.category }}</p>
            <p class="text-muted">Views: {{ req.view_count }}</p>
            <p class="text-muted">Created: {{ req.date_created.strftime('%b %d, %Y') }}</p>

            {% if current_user.id == req.user_id %}
            <div class="mt-3">
                <a href="{{ url_for('views.edit_request', id=req.id) }}" class="btn btn-primary btn-sm">Edit</a>
                <a href="{{ url_for('csr.delete_request', request_id=req.id) }}" class="btn btn-danger btn-sm" 
                   onclick="return confirm('Are you sure you want to delete this request?');">Delete</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
